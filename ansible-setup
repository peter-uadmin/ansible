#pypi.org/project/netapp-ontap/

pip install --upgrade pip
pip install ansible pip install requests requests-toolbelt marshmallow
pip install netapp-ontap
pip install netapp-lib
ansible-galaxy collection install netapp.ontap
ansible-galaxy collection install netapp.storagegrid


dnf install -y git
dnf install python3.11-pip-22.3.1-5.el9.noarch
pip3.11 install oslo_log
chmod -R +x /root/.ansible/collections

#get the workshop
git clone https://github.com/NetApp-Learning-Services/STRSW-ILT-RSTAN ansible-workshop

#set the config variable
echo "ANSIBLE_CONFIG=/root/ansible-workshop/ansible.cfg" >> ~/.bashrc
source ~/.bashrc

#hosts
[ontap]
192.168.4.202 shortname=cl2
192.168.4.204 shortname=cl3
[servers]
192.168.4.193 shortname=rocky-93
[nginx]
192.168.4.193
rocky-93 ansible-host=192.168.4.193

#ansible.cfg
[defaults]
inventory        = ~/ansible-workshop/hosts
log_path         = ~/ansible-workshop/ansible.log
display_skipped_hosts = no

#check inventory
ansible ontap --list-hosts
ansible servers --list-hosts
ansible nginx --list-hosts
ansible rocky-93 --list-hosts

#hostkey checking....
#dnf install -y sshpass

#run ssh-keygen on rocky-93 and store public-key in known-hosts
ansible rocky-93 -m ping -u root 
ansible-workshop]# ansible rocky-93 -m yum -a 'name=python3 state=latest' -u root

